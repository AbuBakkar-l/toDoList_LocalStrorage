<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>ToDo Lisst </title>
     <style>
          body {
               display: flex;
               width: 100vw;
               height: 100vh;
               flex-direction: column;
               justify-content: center;
               align-items: center;
               overflow-x: hidden;
               background-color: rgb(201, 197, 197);
          }

          #result {
               padding: 18px;
               text-transform: capitalize;
          }

          .cls-btn {
               border: none;
               outline: none;
               padding: 5px 9px;
               border-radius: 5px;
               background: rgba(184, 67, 67, 0.822);
               cursor: pointer;
          }
          .todolist{
               background-color: red;
               
          }
     </style>
</head>

<body>
     <main>
          <div class="container">
               <form action="#">
                    <input type="text" id="input">
                    <input type="submit" value="submit" id="submit">
               </form>
          </div>
          <div id="result">
               <!-- <span>tast list</span> -->
          </div>
          <button class="cls-btn">Clear Task</button>
     </main>

     <!-- *********** JavaScript code ************** -->
     <script>
          let input = document.getElementById('input').value;
          let submit = document.getElementById('submit');
          submit.addEventListener('click', () => {
               if (input, value.trim() != 0) {
                    let localItems = JSON.parse(localStorage.getItem('localItem'));
                    if (localItems === null) {
                         tasklist = []
                    } else {
                         tasklist = localItems;
                    }
                    tasklist.push(input.value)
                    localStorage.setItem('localItem', JSON.stringify(tasklist));
               }
               // console.log("hey");
               let localItems = JSON.parse(localStorage.getItem('localItem'));
               if (localItems === null) {
                    tasklist = []
               } else {
                    tasklist = localItems;
               }
               tasklist.push(input)
               localStorage.setItem('localItem', JSON.stringify(tasklist));
               showlist();

          })

          function showlist() {
               let taskShow = '';
               let taskShowItem = document.getElementById('result');
               let localItems = JSON.parse(localStorage.getItem('localItem'));
               if (localItems === null) {
                    tasklist = []
               } else {
                    tasklist = localItems;
               }
               tasklist.push(input)
               localStorage.setItem('localItem', JSON.stringify(tasklist));
               tasklist.forEach((element, index) => {
                    taskShow += `
               <div class = "todolist">
                    <p class="ptage">${element}</p> 
                    <button class ="deleteTask" onclick="deleteItem(${index})">x</button>
                    </div>
               `
               });
               taskShowItem.innerHTML = taskShow;
          }
          showlist();

          function deleteItem(index) {
               let localItems = JSON.parse(localStorage.getItem('localItem'));
               tasklist.splice(index, 1)
               localStorage.setItem('localItem', JSON.stringify(tasklist));
               showlist();
          }
          const clsBtn = document.querySelector('.cls-btn')
          clsBtn.addEventListener('click', () => {
               localStorage.clear();
               showlist();
          });
     </script>
</body>

</html>